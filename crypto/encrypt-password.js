const {
    scrypt,
    randomFillSync,
    createCipheriv
} = require('crypto');
const { promisify } = require('util');

const ALGORITHM = 'aes-192-cbc';
const MY_SALT = 'awesome-salt';

const scryptAsync = promisify(scrypt);

async function main() {
    let encrypted = '';
    const password = 'my-secret-password';
    
    const key = await scryptAsync(password, MY_SALT, 24);
    const randomVector = new Uint8Array(16);
    const iv = randomFillSync(randomVector);

    const cipher = createCipheriv(ALGORITHM, key, iv);
    cipher.setEncoding('hex');
    cipher.on('data', (chunk) => encrypted += chunk);
    cipher.on('end', () => console.log(encrypted));
    cipher.write('some clear text data');
    cipher.end();
}


main()